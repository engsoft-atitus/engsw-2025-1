{% extends "comunidade/base.html" %}
{% load static %}
{% load tz %}
{% block content %}
  <div class="container">
    <div class="community-block">
      <div class="titulo-comunidade-preview">
        <p class="nome">{{community.nome}}</p>
        <p class="tag">@{{community.nome_tag}}</p>
      </div>
      <p>{{community.sobre}}</p>
      <img
        src="{{ community.profile_picture.url }}"
        alt="Imagem de perfil"
        class="community-image"
      />
    
      {% if community.criador.id == user_id %} {# admin #}
        <div class="botoes-admin">
          <button>
            <a href="{% url 'community_edit' community.nome_tag %}">Editar</a>
          </button>
          <button>
            <a href="{% url 'community_delete' community.nome_tag %}">Deletar</a>
          </button>
        </div>

      {% else %} 
        {% if not is_participating %} {# NÃ£o participando#}
    
          <form method="post" action="{% url 'join_community' community.id %}">
            {% csrf_token %}
            <button type="submit">Participar</button>
          </form>
  
        {% else %} {# Participando #}
  
          <form method="post" action="{% url 'exit_community' community.id %}">
              {% csrf_token %}
              <button type="submit">Sair da comunidade</button>
            </form>
  
        {% endif %}
    {% endif %}

    
    <button>
      <a href="{% url 'my_communities' %}">Voltar</a>
    </button>

    <button>
      <a href="{% url 'community_post_page' community.nome_tag %}">Ver posts</a>
    </button>
    
   
    </div>
    <script src="{% static 'comunidade/community_preview.js' %}"></script>
  </div>
{% endblock %}    